/**
 * @fileoverview added by tsickle
 * Generated from: components/Messages/cometchat-action-message-bubble/cometchat-action-message-bubble/cometchat-action-message-bubble.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input } from "@angular/core";
import { CometChat } from "@cometchat-pro/chat";
import { STRING_MESSAGES } from "../../../utils/messageConstants";
export class CometchatActionMessageBubbleComponent {
    constructor() {
        this.MessageDetails = null;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.getMessage();
    }
    /**
     * @return {?}
     */
    getMessage() {
        /** @type {?} */
        const call = this.MessageDetails;
        switch (call.status) {
            case CometChat.CALL_STATUS.INITIATED: {
                this.message = STRING_MESSAGES.CALL_INITIATED;
                if (call.type === "audio") {
                    if (call.receiverType === "user") {
                        this.message =
                            call.callInitiator.uid === this.loggedInUserUid
                                ? STRING_MESSAGES.OUTGOING_AUDIO_CALL
                                : STRING_MESSAGES.INCOMING_AUDIO_CALL;
                    }
                    else if (call.receiverType === "group") {
                        if (call.action === CometChat.CALL_STATUS.INITIATED) {
                            this.message =
                                call.callInitiator.uid === this.loggedInUserUid
                                    ? STRING_MESSAGES.OUTGOING_AUDIO_CALL
                                    : STRING_MESSAGES.INCOMING_AUDIO_CALL;
                        }
                        else if (call.action === CometChat.CALL_STATUS.REJECTED) {
                            this.message =
                                call.sender.uid === this.loggedInUserUid
                                    ? STRING_MESSAGES.CALL_REJECTED
                                    : `${call.sender.name} ` + STRING_MESSAGES.REJECTED_CALL;
                        }
                    }
                }
                else if (call.type === "video") {
                    if (call.receiverType === "user") {
                        this.message =
                            call.callInitiator.uid === this.loggedInUserUid
                                ? STRING_MESSAGES.OUTGOING_VIDEO_CALL
                                : STRING_MESSAGES.INCOMING_VIDEO_CALL;
                    }
                    else if (call.receiverType === "group") {
                        if (call.action === CometChat.CALL_STATUS.INITIATED) {
                            this.message =
                                call.callInitiator.uid === this.loggedInUserUid
                                    ? STRING_MESSAGES.OUTGOING_VIDEO_CALL
                                    : STRING_MESSAGES.INCOMING_VIDEO_CALL;
                        }
                        else if (call.action === CometChat.CALL_STATUS.REJECTED) {
                            this.message =
                                call.sender.uid === this.loggedInUserUid
                                    ? STRING_MESSAGES.CALL_REJECTED
                                    : `${call.sender.name} ` + STRING_MESSAGES.REJECTED_CALL;
                        }
                    }
                }
                break;
            }
            case CometChat.CALL_STATUS.ONGOING: {
                if (call.receiverType === "user") {
                    this.message = STRING_MESSAGES.CALL_ACCEPTED;
                }
                else if (call.receiverType === "group") {
                    if (call.action === CometChat.CALL_STATUS.ONGOING) {
                        this.message =
                            call.sender.uid === this.loggedInUserUid
                                ? STRING_MESSAGES.CALL_ACCEPTED
                                : `${call.sender.name} ` + STRING_MESSAGES.JOINED;
                    }
                    else if (call.action === CometChat.CALL_STATUS.REJECTED) {
                        this.message =
                            call.sender.uid === this.loggedInUserUid
                                ? STRING_MESSAGES.CALL_REJECTED
                                : `${call.sender.name} ` + STRING_MESSAGES.REJECTED_CALL;
                    }
                    else if (call.action === "left") {
                        this.message =
                            call.sender.uid === this.loggedInUserUid
                                ? "You " + STRING_MESSAGES.LEFT_THE_CALL
                                : `${call.sender.name} ` + STRING_MESSAGES.LEFT_THE_CALL;
                    }
                }
                break;
            }
            case CometChat.CALL_STATUS.UNANSWERED: {
                this.message = "Call unanswered";
                if (call.type === "audio" &&
                    (call.receiverType === "user" || call.receiverType === "group")) {
                    this.message =
                        call.callInitiator.uid === this.loggedInUserUid
                            ? STRING_MESSAGES.UNANSWERED_AUDIO_CALL
                            : "Missed audio call";
                }
                else if (call.type === "video" &&
                    (call.receiverType === "user" || call.receiverType === "group")) {
                    this.message =
                        call.callInitiator.uid === this.loggedInUserUid
                            ? STRING_MESSAGES.UNANSWERED_VIDEO_CALL
                            : "Missed video call";
                }
                break;
            }
            case CometChat.CALL_STATUS.REJECTED: {
                this.message = STRING_MESSAGES.CALL_REJECTED;
                break;
            }
            case CometChat.CALL_STATUS.ENDED:
                this.message = STRING_MESSAGES.CALL_ENDED;
                break;
            case CometChat.CALL_STATUS.CANCELLED:
                this.message = STRING_MESSAGES.CALL_CANCELLED;
                break;
            case CometChat.CALL_STATUS.BUSY:
                this.message = STRING_MESSAGES.CALL_BUSY;
                break;
            default:
                break;
        }
    }
}
CometchatActionMessageBubbleComponent.decorators = [
    { type: Component, args: [{
                selector: "cometchat-action-message-bubble",
                template: "<div class=\"callMessageStyle\">\n  <p class=\"callMessageTxtStyle\">\n    {{ message }}\n  </p>\n</div>\n",
                styles: [".callMessageStyle{padding:8px 12px;margin-bottom:16px;text-align:center}.callMessageTxtStyle{font-size:13px;font-weight:500;margin:0}"]
            }] }
];
/** @nocollapse */
CometchatActionMessageBubbleComponent.ctorParameters = () => [];
CometchatActionMessageBubbleComponent.propDecorators = {
    MessageDetails: [{ type: Input }],
    loggedInUserUid: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    CometchatActionMessageBubbleComponent.prototype.MessageDetails;
    /** @type {?} */
    CometchatActionMessageBubbleComponent.prototype.loggedInUserUid;
    /** @type {?} */
    CometchatActionMessageBubbleComponent.prototype.message;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tZXRjaGF0LWFjdGlvbi1tZXNzYWdlLWJ1YmJsZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyLWNoYXQtdWkta2l0LyIsInNvdXJjZXMiOlsiY29tcG9uZW50cy9NZXNzYWdlcy9jb21ldGNoYXQtYWN0aW9uLW1lc3NhZ2UtYnViYmxlL2NvbWV0Y2hhdC1hY3Rpb24tbWVzc2FnZS1idWJibGUvY29tZXRjaGF0LWFjdGlvbi1tZXNzYWdlLWJ1YmJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDaEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBT2xFLE1BQU0sT0FBTyxxQ0FBcUM7SUFJaEQ7UUFIUyxtQkFBYyxHQUFHLElBQUksQ0FBQztJQUdoQixDQUFDOzs7O0lBRWhCLFFBQVE7UUFDTixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDcEIsQ0FBQzs7OztJQUVELFVBQVU7O2NBQ0YsSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjO1FBQ2hDLFFBQVEsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNuQixLQUFLLFNBQVMsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ3BDLElBQUksQ0FBQyxPQUFPLEdBQUcsZUFBZSxDQUFDLGNBQWMsQ0FBQztnQkFDOUMsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLE9BQU8sRUFBRTtvQkFDekIsSUFBSSxJQUFJLENBQUMsWUFBWSxLQUFLLE1BQU0sRUFBRTt3QkFDaEMsSUFBSSxDQUFDLE9BQU87NEJBQ1YsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLGVBQWU7Z0NBQzdDLENBQUMsQ0FBQyxlQUFlLENBQUMsbUJBQW1CO2dDQUNy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QUMsWUFBWSxLQUFLLE9BQU8sQ0FBQyxFQUMvRDtvQkFDQSxJQUFJLENBQUMsT0FBTzt3QkFDVixJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsZUFBZTs0QkFDN0MsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxxQkFBcUI7NEJBQ3ZDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQztpQkFDM0I7Z0JBQ0QsTUFBTTthQUNQO1lBQ0QsS0FBSyxTQUFTLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNuQyxJQUFJLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQyxhQUFhLENBQUM7Z0JBQzdDLE1BQU07YUFDUDtZQUNELEtBQUssU0FBUyxDQUFDLFdBQVcsQ0FBQyxLQUFLO2dCQUM5QixJQUFJLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQyxVQUFVLENBQUM7Z0JBQzFDLE1BQU07WUFDUixLQUFLLFNBQVMsQ0FBQyxXQUFXLENBQUMsU0FBUztnQkFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxlQUFlLENBQUMsY0FBYyxDQUFDO2dCQUM5QyxNQUFNO1lBQ1IsS0FBSyxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUk7Z0JBQzdCLElBQUksQ0FBQyxPQUFPLEdBQUcsZUFBZSxDQUFDLFNBQVMsQ0FBQztnQkFDekMsTUFBTTtZQUNSO2dCQUNFLE1BQU07U0FDVDtJQUNILENBQUM7OztZQTFIRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLGlDQUFpQztnQkFDM0Msc0hBQStEOzthQUVoRTs7Ozs7NkJBRUUsS0FBSzs4QkFDTCxLQUFLOzs7O0lBRE4sK0RBQStCOztJQUMvQixnRUFBeUI7O0lBQ3pCLHdEQUFRIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IENvbWV0Q2hhdCB9IGZyb20gXCJAY29tZXRjaGF0LXByby9jaGF0XCI7XG5pbXBvcnQgeyBTVFJJTkdfTUVTU0FHRVMgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvbWVzc2FnZUNvbnN0YW50c1wiO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6IFwiY29tZXRjaGF0LWFjdGlvbi1tZXNzYWdlLWJ1YmJsZVwiLFxuICB0ZW1wbGF0ZVVybDogXCIuL2NvbWV0Y2hhdC1hY3Rpb24tbWVzc2FnZS1idWJibGUuY29tcG9uZW50Lmh0bWxcIixcbiAgc3R5bGVVcmxzOiBbXCIuL2NvbWV0Y2hhdC1hY3Rpb24tbWVzc2FnZS1idWJibGUuY29tcG9uZW50LmNzc1wiXSxcbn0pXG5leHBvcnQgY2xhc3MgQ29tZXRjaGF0QWN0aW9uTWVzc2FnZUJ1YmJsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpIE1lc3NhZ2VEZXRhaWxzID0gbnVsbDtcbiAgQElucHV0KCkgbG9nZ2VkSW5Vc2VyVWlkO1xuICBtZXNzYWdlO1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5nZXRNZXNzYWdlKCk7XG4gIH1cblxuICBnZXRNZXNzYWdlKCkge1xuICAgIGNvbnN0IGNhbGwgPSB0aGlzLk1lc3NhZ2VEZXRhaWxzO1xuICAgIHN3aXRjaCAoY2FsbC5zdGF0dXMpIHtcbiAgICAgIGNhc2UgQ29tZXRDaGF0LkNBTExfU1RBVFVTLklOSVRJQVRFRDoge1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBTVFJJTkdfTUVTU0FHRVMuQ0FMTF9JTklUSUFURUQ7XG4gICAgICAgIGlmIChjYWxsLnR5cGUgPT09IFwiYXVkaW9cIikge1xuICAgICAgICAgIGlmIChjYWxsLnJlY2VpdmVyVHlwZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9XG4gICAgICAgICAgICAgIGNhbGwuY2FsbEluaXRpYXRvci51aWQgPT09IHRoaXMubG9nZ2VkSW5Vc2VyVWlkXG4gICAgICAgICAgICAgICAgPyBTVFJJTkdfTUVTU0FHRVMuT1VUR09JTkdfQVVESU9fQ0FMTFxuICAgICAgICAgICAgICAgIDogU1RSSU5HX01FU1NBR0VTLklOQ09NSU5HX0FVRElPX0NBTEw7XG4gICAgICAgICAgfSBlbHNlIGlmIChjYWxsLnJlY2VpdmVyVHlwZSA9PT0gXCJncm91cFwiKSB7XG4gICAgICAgICAgICBpZiAoY2FsbC5hY3Rpb24gPT09IENvbWV0Q2hhdC5DQUxMX1NUQVRVUy5JTklUSUFURUQpIHtcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID1cbiAgICAgICAgICAgICAgICBjYWxsLmNhbGxJbml0aWF0b3IudWlkID09PSB0aGlzLmxvZ2dlZEluVXNlclVpZFxuICAgICAgICAgICAgICAgICAgPyBTVFJJTkdfTUVTU0FHRVMuT1VUR09JTkdfQVVESU9fQ0FMTFxuICAgICAgICAgICAgICAgICAgOiBTVFJJTkdfTUVTU0FHRVMuSU5DT01JTkdfQVVESU9fQ0FMTDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FsbC5hY3Rpb24gPT09IENvbWV0Q2hhdC5DQUxMX1NUQVRVUy5SRUpFQ1RFRCkge1xuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPVxuICAgICAgICAgICAgICAgIGNhbGwuc2VuZGVyLnVpZCA9PT0gdGhpcy5sb2dnZWRJblVzZXJVaWRcbiAgICAgICAgICAgICAgICAgID8gU1RSSU5HX01FU1NBR0VTLkNBTExfUkVKRUNURURcbiAgICAgICAgICAgICAgICAgIDogYCR7Y2FsbC5zZW5kZXIubmFtZX0gYCArIFNUUklOR19NRVNTQUdFUy5SRUpFQ1RFRF9DQUxMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChjYWxsLnR5cGUgPT09IFwidmlkZW9cIikge1xuICAgICAgICAgIGlmIChjYWxsLnJlY2VpdmVyVHlwZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9XG4gICAgICAgICAgICAgIGNhbGwuY2FsbEluaXRpYXRvci51aWQgPT09IHRoaXMubG9nZ2VkSW5Vc2VyVWlkXG4gICAgICAgICAgICAgICAgPyBTVFJJTkdfTUVTU0FHRVMuT1VUR09JTkdfVklERU9fQ0FMTFxuICAgICAgICAgICAgICAgIDogU1RSSU5HX01FU1NBR0VTLklOQ09NSU5HX1ZJREVPX0NBTEw7XG4gICAgICAgICAgfSBlbHNlIGlmIChjYWxsLnJlY2VpdmVyVHlwZSA9PT0gXCJncm91cFwiKSB7XG4gICAgICAgICAgICBpZiAoY2FsbC5hY3Rpb24gPT09IENvbWV0Q2hhdC5DQUxMX1NUQVRVUy5JTklUSUFURUQpIHtcbiAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID1cbiAgICAgICAgICAgICAgICBjYWxsLmNhbGxJbml0aWF0b3IudWlkID09PSB0aGlzLmxvZ2dlZEluVXNlclVpZFxuICAgICAgICAgICAgICAgICAgPyBTVFJJTkdfTUVTU0FHRVMuT1VUR09JTkdfVklERU9fQ0FMTFxuICAgICAgICAgICAgICAgICAgOiBTVFJJTkdfTUVTU0FHRVMuSU5DT01JTkdfVklERU9fQ0FMTDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FsbC5hY3Rpb24gPT09IENvbWV0Q2hhdC5DQUxMX1NUQVRVUy5SRUpFQ1RFRCkge1xuICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPVxuICAgICAgICAgICAgICAgIGNhbGwuc2VuZGVyLnVpZCA9PT0gdGhpcy5sb2dnZWRJblVzZXJVaWRcbiAgICAgICAgICAgICAgICAgID8gU1RSSU5HX01FU1NBR0VTLkNBTExfUkVKRUNURURcbiAgICAgICAgICAgICAgICAgIDogYCR7Y2FsbC5zZW5kZXIubmFtZX0gYCArIFNUUklOR19NRVNTQUdFUy5SRUpFQ1RFRF9DQUxMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgQ29tZXRDaGF0LkNBTExfU1RBVFVTLk9OR09JTkc6IHtcbiAgICAgICAgaWYgKGNhbGwucmVjZWl2ZXJUeXBlID09PSBcInVzZXJcIikge1xuICAgICAgICAgIHRoaXMubWVzc2FnZSA9IFNUUklOR19NRVNTQUdFUy5DQUxMX0FDQ0VQVEVEO1xuICAgICAgICB9IGVsc2UgaWYgKGNhbGwucmVjZWl2ZXJUeXBlID09PSBcImdyb3VwXCIpIHtcbiAgICAgICAgICBpZiAoY2FsbC5hY3Rpb24gPT09IENvbWV0Q2hhdC5DQUxMX1NUQVRVUy5PTkdPSU5HKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPVxuICAgICAgICAgICAgICBjYWxsLnNlbmRlci51aWQgPT09IHRoaXMubG9nZ2VkSW5Vc2VyVWlkXG4gICAgICAgICAgICAgICAgPyBTVFJJTkdfTUVTU0FHRVMuQ0FMTF9BQ0NFUFRFRFxuICAgICAgICAgICAgICAgIDogYCR7Y2FsbC5zZW5kZXIubmFtZX0gYCArIFNUUklOR19NRVNTQUdFUy5KT0lORUQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChjYWxsLmFjdGlvbiA9PT0gQ29tZXRDaGF0LkNBTExfU1RBVFVTLlJFSkVDVEVEKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPVxuICAgICAgICAgICAgICBjYWxsLnNlbmRlci51aWQgPT09IHRoaXMubG9nZ2VkSW5Vc2VyVWlkXG4gICAgICAgICAgICAgICAgPyBTVFJJTkdfTUVTU0FHRVMuQ0FMTF9SRUpFQ1RFRFxuICAgICAgICAgICAgICAgIDogYCR7Y2FsbC5zZW5kZXIubmFtZX0gYCArIFNUUklOR19NRVNTQUdFUy5SRUpFQ1RFRF9DQUxMO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2FsbC5hY3Rpb24gPT09IFwibGVmdFwiKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPVxuICAgICAgICAgICAgICBjYWxsLnNlbmRlci51aWQgPT09IHRoaXMubG9nZ2VkSW5Vc2VyVWlkXG4gICAgICAgICAgICAgICAgPyBcIllvdSBcIiArIFNUUklOR19NRVNTQUdFUy5MRUZUX1RIRV9DQUxMXG4gICAgICAgICAgICAgICAgOiBgJHtjYWxsLnNlbmRlci5uYW1lfSBgICsgU1RSSU5HX01FU1NBR0VTLkxFRlRfVEhFX0NBTEw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIENvbWV0Q2hhdC5DQUxMX1NUQVRVUy5VTkFOU1dFUkVEOiB7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IFwiQ2FsbCB1bmFuc3dlcmVkXCI7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjYWxsLnR5cGUgPT09IFwiYXVkaW9cIiAmJlxuICAgICAgICAgIChjYWxsLnJlY2VpdmVyVHlwZSA9PT0gXCJ1c2VyXCIgfHwgY2FsbC5yZWNlaXZlclR5cGUgPT09IFwiZ3JvdXBcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5tZXNzYWdlID1cbiAgICAgICAgICAgIGNhbGwuY2FsbEluaXRpYXRvci51aWQgPT09IHRoaXMubG9nZ2VkSW5Vc2VyVWlkXG4gICAgICAgICAgICAgID8gU1RSSU5HX01FU1NBR0VTLlVOQU5TV0VSRURfQVVESU9fQ0FMTFxuICAgICAgICAgICAgICA6IFwiTWlzc2VkIGF1ZGlvIGNhbGxcIjtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjYWxsLnR5cGUgPT09IFwidmlkZW9cIiAmJlxuICAgICAgICAgIChjYWxsLnJlY2VpdmVyVHlwZSA9PT0gXCJ1c2VyXCIgfHwgY2FsbC5yZWNlaXZlclR5cGUgPT09IFwiZ3JvdXBcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5tZXNzYWdlID1cbiAgICAgICAgICAgIGNhbGwuY2FsbEluaXRpYXRvci51aWQgPT09IHRoaXMubG9nZ2VkSW5Vc2VyVWlkXG4gICAgICAgICAgICAgID8gU1RSSU5HX01FU1NBR0VTLlVOQU5TV0VSRURfVklERU9fQ0FMTFxuICAgICAgICAgICAgICA6IFwiTWlzc2VkIHZpZGVvIGNhbGxcIjtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgQ29tZXRDaGF0LkNBTExfU1RBVFVTLlJFSkVDVEVEOiB7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IFNUUklOR19NRVNTQUdFUy5DQUxMX1JFSkVDVEVEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgQ29tZXRDaGF0LkNBTExfU1RBVFVTLkVOREVEOlxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBTVFJJTkdfTUVTU0FHRVMuQ0FMTF9FTkRFRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENvbWV0Q2hhdC5DQUxMX1NUQVRVUy5DQU5DRUxMRUQ6XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IFNUUklOR19NRVNTQUdFUy5DQUxMX0NBTkNFTExFRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENvbWV0Q2hhdC5DQUxMX1NUQVRVUy5CVVNZOlxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBTVFJJTkdfTUVTU0FHRVMuQ0FMTF9CVVNZO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuIl19